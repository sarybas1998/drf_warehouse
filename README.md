# Django Проект: Склад

## Описание проекта

Проект реализует API для управления складом с использованием Django REST Framework (DRF). Проект оптимизирован для высокой производительности, обработки множества одновременных подключений и максимального количества запросов в секунду (RPS). 

### Основные возможности:
- **API эндпоинты** для управления каталогом, деталями товаров, обновления запасов и поиска.
- **Авторизация** с использованием JWT токенов.
- **PostgreSQL** в качестве основной базы данных.
- **MinIO** для хранения файлов (аналог Amazon S3).
- **Docker** для контейнеризации и запуска в продакшн-среде.
- **Тесты** для проверки работоспособности.

---

## API Эндпоинты

### API для склада:
- **`/api/v1/catalog/`**  
  Каталог товаров.

- **`/api/v1/product/`**  
  Детальная информация о товаре.

- **`/api/v1/search/`**  
  Поиск по товарам.

- **`/api/v1/catalog/update/stocks`**  
  Обновление остатков на складе.

### Авторизация (JWT):
- **`/api/auth/token/`**  
  Получение JWT токена (по умолчанию создаётся суперпользователь: `warehouse:warehouse`).

- **`/api/auth/token/refresh/`**  
  Обновление Access токена.

### Эндпоинт для медиафайлов:
- **`/storage/media/`**  
  Доступ к изображениям товаров, реализовано через MinIO.

---

## Архитектура проекта

Проект полностью контейнеризован и запускается с использованием `docker-compose`. Архитектура оптимизирована для продакшн-среды и включает следующие сервисы:

### Сервисы:
1. **Warehouse_db**  
   PostgreSQL база данных, настроенная для обработки максимального числа одновременных подключений.  
   Настроен контроль доступа через `pg_hba.conf`.

2. **Warehouse_storage**  
   MinIO для хранения изображений товаров, что снижает нагрузку на основное приложение.  
   Доступ к MinIO защищён и проксируется через NGINX.

3. **Warehouse_backend**  
   DRF приложение, реализующее API эндпоинты.

4. **Warehouse_nginx**  
   Точка входа в приложение, распределяет запросы между сервисами.  
   Настроен HTTPS для шифрования трафика.  
   Оптимизирован для обработки большого количества подключений.

---

## Запуск проекта

### Предварительные требования:
- Установленные Docker и Docker Compose.

### Инструкции по запуску:
1. Переименуйте файл `change-me.env` в `.env`.
2. Запустите команду для сборки и запуска контейнеров:
   ```bash
   docker compose up -d --build

Настройки по умолчанию:

    База данных автоматически заполняется тестовыми данными.
    Изображения товаров генерируются с использованием библиотеки PILLOW и сохраняются в MinIO.

### Логирование
Во всех сервисах настроено логирование для мониторинга и отладки.

### Тестирование
Для проверки работоспособности проекта реализованы автоматические тесты. Для запуска выполните команду:
python manage.py test.
Файлы тестов находятся в директории:
drf_warehouse/warehouse_app/tests.py

### Дополнительно

Автозаполнение базы данных:
Во время запуска база данных автоматически наполняется тестовыми данными, включая изображения товаров.

Продакшн-готовность:
Проект полностью готов к развертыванию в продакшн-среде с учётом масштабируемости и безопасности.